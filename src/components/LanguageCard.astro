---
import StoreButtons from './StoreButtons.astro';
import { withBase } from '../utils/withBase';

interface Language {
  slug: string;
  name: string;
  nativeName?: string;
  status: 'available' | 'coming-soon';
  appStore?: string | null;
  playStore?: string | null;
  wordCount?: number;
}

interface Props {
  language: Language;
  showLink?: boolean;
}

const { language, showLink = true } = Astro.props;
const { slug, name, nativeName, status, appStore, playStore } = language;
const languagePath = withBase(`/l/${slug}`);
---

<article 
  class:list={["language-card", `language-card--${status}`]}
  data-language={`${name} ${nativeName || ''}`}
>
  <div class="language-card__content">
    {showLink ? (
      <a href={languagePath} class="language-card__link">
        <h3 class="language-card__name">{name}</h3>
        {nativeName && nativeName !== name && (
          <p class="language-card__native">{nativeName}</p>
        )}
      </a>
    ) : (
      <div class="language-card__header">
        <h3 class="language-card__name">{name}</h3>
        {nativeName && nativeName !== name && (
          <p class="language-card__native">{nativeName}</p>
        )}
      </div>
    )}
  </div>
  
  <div class="language-card__actions">
    <StoreButtons 
      appStore={appStore} 
      playStore={playStore} 
      status={status}
      size="small"
    />
  </div>
</article>

<style>
  .language-card {
    display: flex;
    flex-direction: column;
    gap: var(--space-4);
    padding: var(--space-5);
    background: var(--color-surface);
    border: 1px solid var(--color-border);
    border-radius: var(--radius-lg);
    transition: transform var(--transition-normal), box-shadow var(--transition-normal), border-color var(--transition-normal);
  }
  
  .language-card:hover {
    transform: translateY(-2px);
    box-shadow: var(--shadow-md);
    border-color: var(--color-accent-soft);
  }
  
  .language-card--coming-soon {
    opacity: 0.85;
  }
  
  .language-card__content {
    flex: 1;
  }
  
  .language-card__link {
    text-decoration: none;
    display: block;
  }
  
  .language-card__link:hover .language-card__name {
    color: var(--color-accent);
  }
  
  .language-card__name {
    font-size: var(--font-size-lg);
    font-weight: var(--font-weight-semibold);
    color: var(--color-text);
    margin-bottom: var(--space-1);
    transition: color var(--transition-fast);
  }
  
  .language-card__native {
    font-size: var(--font-size-sm);
    color: var(--color-text-muted);
    margin: 0;
  }
  
  .language-card__actions {
    margin-top: auto;
  }
</style>
